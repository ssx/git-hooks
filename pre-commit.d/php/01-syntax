#!/usr/bin/env bash
# ─────────────────────────────────────────────────────────────────────────────
# Repository : https://github.com/ssx/git-hooks
# Author     : https://github.com/ssx
# License    : Provided as-is with no warranty. Use at your own risk.
# ─────────────────────────────────────────────────────────────────────────────
#
# Check: PHP syntax is valid
# Scope: php

tmp="$1"
src="$2"

if ! command -v php &>/dev/null; then
  printf '        warning: php not found in PATH — skipping syntax check\n' >&2
  exit 0
fi

if ! out=$(php -l "$tmp" 2>&1); then
  printf '%s\n' "${out//$tmp/$src}" | sed 's/^/        /'
  exit 1
fi

exit 0
