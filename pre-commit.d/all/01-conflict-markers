#!/usr/bin/env bash
# ─────────────────────────────────────────────────────────────────────────────
# Repository : https://github.com/ssx/git-hooks
# Author     : Scott Robinson (https://github.com/ssx)
# License    : MIT — see LICENSE for details
# ─────────────────────────────────────────────────────────────────────────────
#
# Check: no git merge conflict markers
# Scope: all staged files (binary files skipped automatically via grep -I)

tmp="$1"
src="$2"

if matches=$(grep -InE '^(<{7}[[:space:]]|={7}$|>{7}[[:space:]])' "$tmp" 2>/dev/null); then
  printf '%s\n' "$matches" | sed "s|^|        $src:|"
  exit 1
fi

exit 0
